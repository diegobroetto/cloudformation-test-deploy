template-file-path: './test-template.yaml'

Parameters:

  Environment:
      Description:    Please specify the target environment.
      Type:           String
      Default:        "dev"
      AllowedValues:
        - prod
        - hml
        - dev
      ConstraintDescription: must specify a enviroment

  InstanceVPCID:
    Description:    Please choose VPC
    Type:           AWS::EC2::VPC::Id

  AppName:
    Description:  Application environment name.
    Type:         String
    Default:      "broetto"
  
  Owner:
    Description:  Application owner  name.
    Type:         String
    Default:      "ebe"

  AlternateDomainNames:
    Description:    CNAMEs (alternate domain names), if any, for the distribution.
    Type:           String
    Default:        "broetto.com.br"
  
  SubnetID:
    Description:    Please choose Subnet for ASG and ALB
    Type:           List<AWS::EC2::Subnet::Id>
  
  HealthCheckPath:
    Description:    Origin ALB Target Group Health Check Path.
    Type:           String
    Default:        "/"
  
  OriginALBTGPort:
    Description:    Port number the application is running on, for Origin ALB Target Group and Health Check port.
    Type:           String
    Default:        "80"
  
  BootVolSize:
    Description:    EC2 Instance Boot volume size.
    Type:           String
    Default:        "15"
  
  BootVolType:
    Description:    EC2 Instance Boot volume type.
    Type:           String
    Default:        "gp3"
    AllowedValues:
      - gp3
      - io1
      - sc1
      - st1
  
  EC2InstanceType:
    Description:    Amazon EC2 instance type.
    Type:           String
    Default:        "t3.small"
  
  LatestLinuxAmiId:
    Type: 'AWS::SSM::Parameter::Value<AWS::EC2::Image::Id>'
    Default: '/aws/service/ami-amazon-linux-latest/al2023-ami-kernel-default-x86_64'
  
  KeyPairName:
    Description:     EC2 KeyPair.
    Type:           'AWS::EC2::KeyPair::KeyName'
    ConstraintDescription: must have a key pair.
  
  InstanceSGID:
    Description:    Please choose Security Group for EC2 Instances
    Type:           AWS::EC2::SecurityGroup::Id
  
  InstanceSubnetID:
    Description:    Please choose Subnet for ASG and ALB
    Type:           List<AWS::EC2::Subnet::Id>

  ASGMinSize:
    Description:    Auto Scaling Group Configuration Ec2 (MinSize) (DesiredSize)
    Type:           String
    Default:        "2"

  ASGMaxSize:
    Description:    Auto Scaling Group Configuration Ec2 (MaxSize)
    Type:           String
    Default:        "10"
  
  ACMCertificateIdentifier:
    Description:    The AWS Certificate Manager (ACM) certificate identifier.
    Type:           String
    Default:        " "

  BucketVersioning:
    Description:    The versioning state of an Amazon S3 bucket. If you enable versioning, you must suspend versioning to disable it.
    Type:           String
    Default:        "Enabled"
    AllowedValues:
      - Enabled
      - Suspended

  ViewerProtocolPolicy:
    Description:    The protocol that users can use to access the files in the origin that you specified in the TargetOriginId property when the default cache behavior is applied to a request.
    Type:           String
    Default:        "redirect-to-https"
    AllowedValues:
      - redirect-to-https
      - allow-all
      - https-only
  
Mappings:
  CacheSettings:
    dev:
      DefaultTTL: 0
      MaxTTL: 0
      MinTTL: 0
    hml:
      DefaultTTL: 0
      MaxTTL: 0
      MinTTL: 0
    prod:
      DefaultTTL: 86400
      MaxTTL: 31536000
      MinTTL: 0
  WAF:
    dev:
      ACLARN: arn:aws:wafv2:us-east-1:116762053366:global/webacl/hmldev_broetto-com-br-blog-solucoes/e2e580ce-157c-40c9-a66d-cae9378b45d7
    hml:
      ACLARN: arn:aws:wafv2:us-east-1:116762053366:global/webacl/hmldev_broetto-com-br-blog-solucoes/e2e580ce-157c-40c9-a66d-cae9378b45d7
    prod:
      ACLARN: arn:aws:wafv2:us-east-1:852138857024:global/webacl/AWSWAFSecurityAutomations/a1be57b1-dfbe-42c0-9dc4-502a5505defd
  Aliases:
    dev:
      url: dev-www
      mediaurl: dev-media
    hml:
      url: hml-www
      mediaurl: hml-media
    prod:
      url: www
      mediaurl: media